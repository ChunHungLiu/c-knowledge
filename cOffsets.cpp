#include "main.h"

cOffsets Offsets;

void cOffsets::Initialize() {
    //Classes Offsets
    RefDef_OFFS = Scan.FindPattern ( "\xbe\x00\x00\x00\x00\xe8\x00\x00\x00\x00\x5f\x5e\x5d\x83\xc4\x10", "x????x????xxxxxx" );
    RefDef_OFFS = * ( DWORD* ) ( RefDef_OFFS + 0x1 );
    CG_OFFS = Scan.FindPattern ( "\x68\x00\x00\x00\x00\xe8\x00\x00\x00\x00\x8b\x6c\x24\x28", "x????x????xxxx" );
    CG_OFFS = * ( DWORD* ) ( CG_OFFS + 0x1 );
    CGS_OFFS = Scan.FindPattern ( "\x89\x1d\x00\x00\x00\x00\xe8\x00\x00\x00\x00\x83\xc4\x44", "xx????x????xxx" );
    CGS_OFFS = * ( DWORD* ) ( CGS_OFFS + 0x2 );
    ViewMatrix_OFFS = Scan.FindPattern ( "\xb8\x00\x00\x00\x00\xd9\x80\x98\x00\x00\x00", "x????xxxxxx" );
    ViewMatrix_OFFS = * ( DWORD* ) ( ViewMatrix_OFFS + 0x1 );
    Entity_Size_OFFS = Scan.FindPattern ( "\x69\xc0\x00\x00\x00\x00\x05\x00\x00\x00\x00\x83\xb8\xd4\x00\x00\x00\x01", "xx????x????xxxxxxx" );
    Entity_OFFS = * ( DWORD* ) ( Entity_Size_OFFS + 0x7 );
    Entity_Size_OFFS = * ( DWORD* ) ( Entity_Size_OFFS + 0x2 );
    ClientInfo_Size_OFFS = Scan.FindPattern ( "\x69\xc9\x00\x00\x00\x00\x6a\x00\x81\xc1\x00\x00\x00\x00", "xx????xxxx????" );
    ClientInfo_OFFS = * ( DWORD* ) ( ClientInfo_Size_OFFS + 0xA );
    ClientInfo_Size_OFFS = * ( DWORD* ) ( ClientInfo_Size_OFFS + 0x2 );
    GetWeapon_OFFS = Scan.FindPattern ( "\x8b\x14\x85\x00\x00\x00\x00\x8b\x02\x80\x38\x69", "xxx????xxxxx" );
    GetWeapon_OFFS = * ( DWORD* ) ( GetWeapon_OFFS + 0x3 );
    DisableIngameMouse_OFFS = Scan.FindPattern ( "\xc6\x05\x00\x00\x00\x00\x00\x80\x78\x0c\x00\x74\x00\xc6\x05\x00\x00\x00\x00\x00", "xx?????xxxxx?xx?????" );
    DisableIngameMouse_OFFS = * ( DWORD* ) ( DisableIngameMouse_OFFS + 0x2 );

    IsInGame_OFFS = Scan.FindPattern ( "\xF7\x05\x00\x00\x00\x00\x00\x00\x00\x00\x75\x24", "xx????????xx" );
    IsInGame_OFFS = * ( DWORD* ) ( IsInGame_OFFS + 0x2 );
    Zoom_OFFS = Scan.FindPattern ( "\x68\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x83\xC4\x14\x6A\x03", "x????x????xxxxx" );
    Zoom_OFFS = * ( DWORD* ) ( Zoom_OFFS + 0x1 );

    FullBright_OFFS = Scan.FindPattern ( "\xC7\x05\x00\x00\x00\x00\x00\x00\x00\x00\xC7\x05\x00\x00\x00\x00\x00\x00\x00\x00\xC7\x05\x00\x00\x00\x00\x00\x00\x00\x00\xE9", "xx????????xx????????xx????????x" );
    FullBright_OFFS = * ( DWORD* ) ( FullBright_OFFS + 0x2 ) + 0x4;
    NoFog_OFFS = FullBright_OFFS + 0x8;
    AdvUav_OFFS = CG_OFFS + 0x204;
    AdvUavCVAR_OFFS = Scan.FindPattern ( "\xA1\x00\x00\x00\x00\x8A\x48\x0C\x83\xC4\x24", "x????xxxxxx" );
    AdvUavCVAR_OFFS = * ( DWORD* ) ( AdvUavCVAR_OFFS + 0x1 );

    RegisterFont_OFFS = Scan.FindPattern ( "\x8b\x44\x24\x04\x6a\x01\x50\x6a\x18", "xxxxxxxxx" );
    RegisterShader_OFFS = Scan.FindPattern ( "\x8b\x44\x24\x04\x80\x38\x00\x75\x00", "xxxxxxxx?" );
    EngineText_OFFS = Scan.FindPattern ( "\x8b\x44\x24\x04\x80\x38\x00\x0f\x84\x00\x00\x00\x00", "xxxxxxxxx????" );
    StrWidth_OFFS = Scan.FindPattern ( "\x51\x53\x57\x33\xdb", "xxxxx" );
    CG_Trace_OFFS = Scan.FindPattern ( "\x8B\x44\x24\x14\x8B\x4C\x24\x10\x8B\x54\x24\x08", "xxxxxxxxxxxx" );
    GetPlayerTag_OFFS = Scan.FindPattern ( "\x8b\x8e\xd0\x00\x00\x00\x50\x51\xe8\x00\x00\x00\x00\x83\xc4\x08\x85\xc0\x75\x00\xc3", "xxxxxxxxx????xxxxxx?x" );
    RegisterTag_OFFS = Scan.FindPattern ( "\x68\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68\x00\x00\x00\x00\x66\xA3\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x68","x????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x????xx????x????x" );
    RegisterTag_OFFS += 0x5;
	DWORD temp;
	temp = * ( DWORD* ) ( RegisterTag_OFFS + 0x1 );
	RegisterTag_OFFS = RegisterTag_OFFS + temp + 0x5;

    NoRecoil_OFFS = Scan.FindPattern ( "\xE8\x00\x00\x00\x00\x83\xC4\x14\x8B\x44\x24\x40\x8B\x4C\x24\x10", "x????xxxxxxxxxxx" );
    GetScreenMatrix_OFFS = Scan.FindPattern ( "\xA1\x00\x00\x00\x00\x83\xF8\x03\x77\x0D", "x????xxxxx" );
    WorldToScreen_OFFS = Scan.FindPattern ( "\x83\xEC\x0C\x8B\x44\x24\x18\xD9\x00", "xxxxxxxxx" );
    UIShowList_OFFS = Scan.FindPattern ( "\xA1\x00\x00\x00\x00\x81\xEC\x00\x00\x00\x00\x80\x78\x0C\x00\x74\x29", "x????xx????xxxxxx" );
    CG_Draw2D_OFFS =  Scan.FindPattern ( "\x56\x8B\x74\x24\x08\x56\xE8\x00\x00\x00\x00\x83\xC4\x04\x83\x3D", "xxxxxxx????xxxxx" );
    WritePacket_OFFS = Scan.FindPattern ( "\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x8B\x84\x24\x00\x00\x00\x00\x56\x8B\x35", "x????x????xxx????xxx" );
    DrawShadersOnText_OFFS = Scan.FindPattern ( "\x56\x53\x8B\xF0\xE8\x00\x00\x00\x00\x83\xC4\x04\x8D\x50\x01", "xxxxx????xxxxxx" );
    SendCommandToConsole_OFFS = Scan.FindPattern ( "\x6A\x1F\xE8\x00\x00\x00\x00\x8B\x44\x24\x0C", "xxx????xxxx" );
    DrawRotatedPic_OFFS = Scan.FindPattern ( "\x83\xEC\x50\xD9\x44\x24\x68", "xxxxxxx" );
    NightmareTX_NoRecoil_OFFS = Scan.FindPattern ( "\xD8\x00\xDC\x0D", "xxxx" );
    Laser_OFFS = Scan.FindPattern ( "\x74\x25\x8B\x0F\x8B\x54\x24\x78", "xxxxxxxx" );
	
	Input_OFFS = 0xC14630;
	
	dwDVar = 0x9D4CFC;
	dwDVarValue = 0x5AB1F48;
	ExcAddy = 0x5A14F7;

	R_BulletPenetrationOFFS = Scan.FindPattern("\x81\xEC\x00\x00\x00\x00\x53\x8B\x9C\x24\x00\x00\x00\x00\x55\x8B\xAC\x24\x00\x00\x00\x00\x56\x57\x83\xFB\xFF","xx????xxxx????xxxx????xxxxx");
	R_BulletPenetrationCheckOFFS = Scan.FindPattern("\x83\xEC\x5C\x57\x8B\xF8","xxxxxx");
	DisableImpacts = Scan.FindPattern("\x8B\x4C\x24\x10\x8B\x44\x24\x24\x55", "xxxxxxxxx");

	ChopperBoxes_OFFS = 0x5C3760;
	GetWeaponShader_OFFS = 0xADE10C;
}
